<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Extracurricular Activities</title>
  <style>
    :root{
      --bg-a: #071029;
      --bg-b: #0f1b2b;
      --surface: rgba(255,255,255,0.04);
      --muted: #bfc9d6;
      --text: #e6eef8;
    }

    .light-theme{
      --bg-a:#f7fbff;
      --bg-b:#eef6ff;
      --surface:rgba(2,6,23,0.04);
      --muted:#556074;
      --text:#0b1220;
    }

    body{min-height:100vh;margin:0;background: linear-gradient(180deg,var(--bg-a), var(--bg-b));color:var(--text);font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    .container{max-width:900px;margin:0 auto;padding:22px}
    .topbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    .back{color:inherit;text-decoration:none;background:rgba(255,255,255,0.06);padding:8px 12px;border-radius:10px}
    .card{background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:12px;box-shadow:0 8px 26px rgba(2,6,23,0.6);}
    .title{font-size:14px;color:var(--muted);margin-bottom:8px}
    .activities{display:flex;flex-direction:column;gap:10px;margin-top:12px}
    .activity{display:flex;justify-content:space-between;padding:10px;border-radius:8px;background:rgba(255,255,255,0.02);align-items:center}
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../styles.css">
  <script>
    function applySavedTheme(){
      try{
        const saved = localStorage.getItem('theme');
        document.body.classList.toggle('light-theme', saved === 'light');
      }catch(e){}
    }
    applySavedTheme();
    window.addEventListener('pageshow', applySavedTheme);

    document.addEventListener('DOMContentLoaded', ()=>{
      const y = new Date().getFullYear();
      const el = document.getElementById('year');
      if(el) el.textContent = y;
    });
  </script>
</head>
<body>
  <!-- SIDEBAR (reuse from dashboard) -->
  <aside class="sidebar" id="sidebar" aria-label="Main sidebar">
    <div class="brand">
      <span class="logo" aria-hidden="true"></span>
      <div>
        <div style="font-size:15px;font-weight:700;color:var(--text)">Krushna Saruk</div>
        <div style="font-size:11px;color:var(--muted);margin-top:2px">Student ID: 3292957</div>
      </div>
    </div>

    <nav>
      <div class="nav-item" data-section="insights">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 13h4v8H3zM8.5 3h4v18h-4zM17 8h4v13h-4z" fill="currentColor" opacity="0.9"/></svg>
        <div class="nav-label">Attendance Insights</div>
      </div>

      <div class="nav-item active" data-section="extracurricular">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="currentColor" opacity="0.9"/></svg>
        <div class="nav-label">Extracurricular</div>
      </div>
      <div class="nav-submenu" style="display:block;">
        <div class="nav-subitem active" data-subsection="your-activities">Your Activities</div>
        <div class="nav-subitem" data-subsection="upcoming-events">Upcoming Events</div>
        <div class="nav-subitem" data-subsection="club-listings">Club Listings</div>
        <div class="nav-subitem" data-subsection="past-events">Past Events</div>
        <div class="nav-subitem" data-subsection="achievements">Student Achievements</div>
      </div>

      <div class="nav-item" data-section="settings">
        <svg width="18" height="18" viewBox="0 0 24 24"><path d="M12 8a4 4 0 100 8 4 4 0 000-8z" fill="currentColor" opacity="0.9"/></svg>
        <div class="nav-label">Settings</div>
      </div>
      <div class="nav-item" data-section="moodle">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z" fill="currentColor" opacity="0.9"/></svg>
        <div class="nav-label">Moodle</div>
      </div>
    </nav>

    <div class="mobile-buttons">
      <button class="mobile-btn" id="mobileCalendarBtn">
        <svg width="16" height="16" viewBox="0 0 24 24"><path d="M7 11h10M3 7h18M7 3v4M17 3v4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
        Calendar
      </button>
      <button class="mobile-btn" id="mobileNotifBtn">
        <svg width="16" height="16" viewBox="0 0 24 24"><path d="M12 22a2 2 0 002-2H10a2 2 0 002 2zM18 16v-5a6 6 0 00-12 0v5l-2 2h16l-2-2z" fill="currentColor"/></svg>
        Alerts
      </button>
    </div>

    <div class="bottom muted">
      © <span id="year"></span> SchoolSystem
    </div>
  </aside>

  <div class="main">
    <main class="content-wrapper">
    <div class="topbar">
      <h1 style="margin:0;font-size:20px">Extracurricular</h1>
      <a class="back" href="../index.html">← Back to Dashboard</a>
    </div>

    <div class="card" id="extracurricularContent">
      <div class="title">Your Activities</div>
      <div class="activities">
        <div class="activity"><div>Basketball Team</div><div style="color:var(--muted)">Practice: Mon/Wed 4-6pm</div></div>
        <div class="activity"><div>Robotics Club</div><div style="color:var(--muted)">Meeting: Tue 3-5pm</div></div>
        <div class="activity"><div>Debate Team</div><div style="color:var(--muted)">Practice: Thu 3:30-5pm</div></div>
      </div>
    </div>
    <div style="margin-top:14px;color:var(--muted);font-size:13px">© <span id="year"></span> SchoolSystem</div>
    </main>
  </div>

  <script src="../script.js"></script>
  <script>
    // In-page content switching for extracurricular sections
    const sections = {
      'your-activities': `
        <div class="title">Your Activities</div>
        <div class="activities">
          <div class="activity"><div>Speak Society</div><div style="color:var(--muted)">Weekly meet: Wed 6pm — Venue: Seminar Hall</div><div style="margin-top:8px"><button class="join-btn" data-club="Speak Society">Leave Club</button></div></div>
          <div class="activity"><div>Coders Club</div><div style="color:var(--muted)">Workshop: Sat 10am — Venue: Lab 3</div><div style="margin-top:8px"><button class="join-btn" data-club="Coders Club">Joined</button></div></div>
          <div class="activity"><div>Cyber Security Club</div><div style="color:var(--muted)">CTF practice: Fri 5pm — Server: internal</div><div style="margin-top:8px"><button class="join-btn" data-club="Cyber Security Club">Join</button></div></div>
        </div>
      `,
      'upcoming-events': `
        <div class="title">Upcoming Events</div>
        <div class="activities">
          <div class="activity"><div><strong>Inter-College Hackathon</strong></div><div style="color:var(--muted)">Date: Dec 5 — Prize pool: $2000</div><div style="margin-top:8px"><button class="rsvp-btn" data-event="Inter-College Hackathon">RSVP</button></div></div>
          <div class="activity"><div><strong>Guest Talk: Cybersecurity Careers</strong></div><div style="color:var(--muted)">Date: Nov 28 — Speaker: A. Sharma</div><div style="margin-top:8px"><button class="rsvp-btn" data-event="Cybersecurity Talk">RSVP</button></div></div>
          <div class="activity"><div><strong>Community Outreach</strong></div><div style="color:var(--muted)">Date: Dec 12 — Volunteering & coordination</div><div style="margin-top:8px"><button class="rsvp-btn" data-event="Community Outreach">Sign Up</button></div></div>
        </div>
      `,
      'club-listings': `
        <div class="title">Club Listings</div>
        <div class="activities">
          <div class="activity"><div><strong>Speak Society</strong></div><div style="color:var(--muted)">Public speaking, debates and workshops. Contact: speak@college.edu</div><div style="margin-top:8px"><button class="join-btn" data-club="Speak Society">Join</button></div></div>
          <div class="activity"><div><strong>Coders Club</strong></div><div style="color:var(--muted)">Competitive coding, project teams and hackathons. Contact: coders@college.edu</div><div style="margin-top:8px"><button class="join-btn" data-club="Coders Club">Join</button></div></div>
          <div class="activity"><div><strong>Cyber Security Club</strong></div><div style="color:var(--muted)">CTFs, workshops and research. Contact: cyber@college.edu</div><div style="margin-top:8px"><button class="join-btn" data-club="Cyber Security Club">Join</button></div></div>
          <div class="activity"><div><strong>Antrishk Club</strong></div><div style="color:var(--muted)">Arts, theatre and cultural events. Contact: antrishk@college.edu</div><div style="margin-top:8px"><button class="join-btn" data-club="Antrishk Club">Join</button></div></div>
        </div>
        <div style="margin-top:12px;color:var(--muted);font-size:13px">Tip: Click 'Join' to add a club to your profile (stored locally for demo).</div>
      `,
      'past-events': `
        <div class="title">Past Events</div>
        <div class="activities">
          <div class="activity"><div>Annual Tech Fest</div><div style="color:var(--muted)">Highlights: Project expo — Winners: Team Orion</div></div>
          <div class="activity"><div>Drama Night</div><div style="color:var(--muted)">Highlights: Short plays and performances</div></div>
        </div>
      `,
      'achievements': `
        <div class="title">Student Achievements</div>
        <div class="activities">
          <div class="activity"><div>Coders Club</div><div style="color:var(--muted)">Won 2nd place in Regional Hackathon</div></div>
          <div class="activity"><div>Speak Society</div><div style="color:var(--muted)">Inter-college debate champions</div></div>
        </div>
      `
    };

    function renderSection(key){
      const container = document.getElementById('extracurricularContent');
      if(!container) return;
      container.innerHTML = sections[key] || '<div class="title">Not found</div>'; 
    }

    // Determine initial section from URL hash (deep-link) or default
    const initialKey = (location.hash && location.hash.slice(1)) || 'your-activities';
    renderSection(initialKey);
    // ensure the correct subitem is active
    document.querySelectorAll('.nav-subitem').forEach(s=> s.classList.toggle('active', s.getAttribute('data-subsection') === initialKey));

    // nav-subitem clicks handled here will update active class, render content, and update the hash
    document.querySelectorAll('.nav-subitem').forEach(sub=>{
      sub.addEventListener('click', ()=>{
        document.querySelectorAll('.nav-subitem').forEach(s=>s.classList.remove('active'));
        sub.classList.add('active');
        const key = sub.getAttribute('data-subsection');
        renderSection(key);
        try{
          if(history && history.replaceState){ history.replaceState(null, '', '#' + key); } else { location.hash = key; }
        }catch(e){}
      });
    });
    
    // Small client-side handlers for demo interactions (join club / RSVP)
    function loadMemberships(){
      try{ return JSON.parse(localStorage.getItem('memberships')||'{}'); }catch(e){ return {}; }
    }
    function saveMemberships(m){ try{ localStorage.setItem('memberships', JSON.stringify(m)); }catch(e){}
    }

    // Initialize join buttons state from localStorage when a section is rendered
    const origRender = renderSection;
    window.renderSection = function(key){
      origRender(key);
      // update any join buttons shown
      const m = loadMemberships();
      document.querySelectorAll('.join-btn').forEach(b=>{
        const club = b.getAttribute('data-club');
        b.textContent = m[club] ? 'Joined' : 'Join';
      });
    };

    document.addEventListener('click', (e)=>{
      const j = e.target.closest('.join-btn');
      if(j){
        const club = j.getAttribute('data-club');
        const m = loadMemberships();
        if(m[club]){ // leave
          delete m[club];
          j.textContent = 'Join';
          alert('Left ' + club);
        } else { // join
          m[club] = true;
          j.textContent = 'Joined';
          alert('Joined ' + club);
        }
        saveMemberships(m);
        return;
      }
      const r = e.target.closest('.rsvp-btn');
      if(r){
        const ev = r.getAttribute('data-event');
        alert('Thanks — you are registered for: ' + ev);
        r.textContent = 'Registered';
        return;
      }
    });
  </script>
  </div>
</body>
</html>


